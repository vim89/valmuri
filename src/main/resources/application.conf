valmuri {
  server {
    host = "localhost"
    host = ${?VALMURI_HOST}
    port = 8080
    port = ${?VALMURI_PORT}
    max-connections = 1000
    request-timeout = 30s
    shutdown-timeout = 10s
  }

  database {
    driver = "org.sqlite.JDBC"
    url = "jdbc:sqlite:./valmuri.db"
    url = ${?DATABASE_URL}
    username = ${?DATABASE_USERNAME}
    password = ${?DATABASE_PASSWORD}
    pool-size = 10
    connection-timeout = 5s

    migrations {
      enabled = true
      location = "db/migrations"
      auto-migrate = true
    }
  }

  logging {
    level = "INFO"
    level = ${?LOG_LEVEL}
    format = "text"
    console = true
    file = ${?LOG_FILE}
  }

  security {
    cors {
      enabled = true
      allowed-origins = ["*"]
      allowed-methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
      allowed-headers = ["*"]
    }

    csrf {
      enabled = true
      cookie-name = "valmuri-csrf-token"
      header-name = "X-CSRF-Token"
    }

    headers {
      enabled = true
      content-type-options = true
      frame-options = "DENY"
      xss-protection = true
    }
  }

  features {
    admin-panel = false
    api-docs = true
    metrics = true
    health-check = true
  }
}
